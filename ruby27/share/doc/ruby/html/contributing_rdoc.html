<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>contributing - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Contributing+to+Ruby">Contributing to Ruby</a>
    <li><a href="#label-How+To+Report">How To Report</a>
    <li><a href="#label-Reporting+to+downstream+distributions">Reporting to downstream distributions</a>
    <li><a href="#label-Platform+Maintainers">Platform Maintainers</a>
    <li><a href="#label-Reporting+Security+Issues">Reporting Security Issues</a>
    <li><a href="#label-Reporting+Other+Issues">Reporting Other Issues</a>
    <li><a href="#label-Resolve+Existing+Issues">Resolve Existing Issues</a>
    <li><a href="#label-How+To+Request+Features">How To Request Features</a>
    <li><a href="#label-Slideshow">Slideshow</a>
    <li><a href="#label-Backport+Requests">Backport Requests</a>
    <li><a href="#label-Branches">Branches</a>
    <li><a href="#label-Running+tests">Running tests</a>
    <li><a href="#label-Contributing+Documentation">Contributing Documentation</a>
    <li><a href="#label-Contributing+A+Patch">Contributing A Patch</a>
    <li><a href="#label-Deciding+what+to+patch">Deciding what to patch</a>
    <li><a href="#label-Coding+style">Coding style</a>
    <li><a href="#label-Commit+messages">Commit messages</a>
    <li><a href="#label-Contributing+your+code">Contributing your code</a>
    <li><a href="#label-Updating+the+official+repository">Updating the official repository</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="./COPYING.html">COPYING</a>
  
    <li><a href="./COPYING_ja.html">COPYING.ja</a>
  
    <li><a href="./LEGAL.html">LEGAL</a>
  
    <li><a href="./NEWS.html">NEWS</a>
  
    <li><a href="./NEWS-1_8_7.html">NEWS-1.8.7</a>
  
    <li><a href="./NEWS-1_9_1.html">NEWS-1.9.1</a>
  
    <li><a href="./NEWS-1_9_2.html">NEWS-1.9.2</a>
  
    <li><a href="./NEWS-1_9_3.html">NEWS-1.9.3</a>
  
    <li><a href="./NEWS-2_0_0.html">NEWS-2.0.0</a>
  
    <li><a href="./NEWS-2_1_0.html">NEWS-2.1.0</a>
  
    <li><a href="./NEWS-2_2_0.html">NEWS-2.2.0</a>
  
    <li><a href="./NEWS-2_3_0.html">NEWS-2.3.0</a>
  
    <li><a href="./NEWS-2_4_0.html">NEWS-2.4.0</a>
  
    <li><a href="./NEWS-2_5_0.html">NEWS-2.5.0</a>
  
    <li><a href="./NEWS-2_6_0.html">NEWS-2.6.0</a>
  
    <li><a href="./README_ja_md.html">README.ja</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./bug_triaging_rdoc.html">bug_triaging</a>
  
    <li><a href="./contributing_rdoc.html">contributing</a>
  
    <li><a href="./contributors_rdoc.html">contributors</a>
  
    <li><a href="./dtrace_probes_rdoc.html">dtrace_probes</a>
  
    <li><a href="./extension_ja_rdoc.html">extension.ja</a>
  
    <li><a href="./extension_rdoc.html">extension</a>
  
    <li><a href="./globals_rdoc.html">globals</a>
  
    <li><a href="./keywords_rdoc.html">keywords</a>
  
    <li><a href="./lib/racc/pre-setup.html">pre-setup</a>
  
    <li><a href="./lib/racc/rdoc/grammar_en_rdoc.html">grammar.en</a>
  
    <li><a href="./maintainers_rdoc.html">maintainers</a>
  
    <li><a href="./marshal_rdoc.html">marshal</a>
  
    <li><a href="./regexp_rdoc.html">regexp</a>
  
    <li><a href="./security_rdoc.html">security</a>
  
    <li><a href="./signals_rdoc.html">signals</a>
  
    <li><a href="./standard_library_rdoc.html">standard_library</a>
  
    <li><a href="./syntax_rdoc.html">syntax</a>
  
    <li><a href="./syntax/assignment_rdoc.html">assignment</a>
  
    <li><a href="./syntax/calling_methods_rdoc.html">calling_methods</a>
  
    <li><a href="./syntax/comments_rdoc.html">comments</a>
  
    <li><a href="./syntax/control_expressions_rdoc.html">control_expressions</a>
  
    <li><a href="./syntax/exceptions_rdoc.html">exceptions</a>
  
    <li><a href="./syntax/literals_rdoc.html">literals</a>
  
    <li><a href="./syntax/methods_rdoc.html">methods</a>
  
    <li><a href="./syntax/miscellaneous_rdoc.html">miscellaneous</a>
  
    <li><a href="./syntax/modules_and_classes_rdoc.html">modules_and_classes</a>
  
    <li><a href="./syntax/precedence_rdoc.html">precedence</a>
  
    <li><a href="./syntax/refinements_rdoc.html">refinements</a>
  
    <li><a href="./win32/README_win32.html">README.win32</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page contributing.rdoc">

<h1 id="label-Contributing+to+Ruby">Contributing to Ruby<span><a href="#label-Contributing+to+Ruby">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Ruby has a vast and friendly community with hundreds of people contributing to a thriving open-source ecosystem. This guide is designed to cover ways for participating in the development of CRuby.</p>

<p>There are plenty of ways for you to help even if you&#39;re not ready to write code or documentation.  You can help by reporting issues, testing patches, and trying out beta releases with your applications.</p>

<h2 id="label-How+To+Report">How To Report<span><a href="#label-How+To+Report">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;ve encountered a bug in Ruby please report it to the redmine issue tracker available at <a href="https://bugs.ruby-lang.org/">bugs.ruby-lang.org</a>.  Do not report security vulnerabilities here, there is a <a href="#label-Reporting+Security+Issues">separate channel</a> for them.</p>

<p>There are a few simple steps you should follow in order to receive feedback on your ticket.</p>
<ul><li>
<p>If you haven&#39;t already, <a href="https://bugs.ruby-lang.org/account/register">sign up for an account</a> on the bug tracker.</p>
</li><li>
<p>Try the latest version.</p>

<p>If you aren&#39;t already using the latest version, try installing a newer stable release. See <a href="https://www.ruby-lang.org/en/downloads/">Downloading Ruby</a>.</p>
</li><li>
<p>Look to see if anyone already reported your issue, try <a href="https://bugs.ruby-lang.org/projects/ruby-trunk/issues">searching on redmine</a> for your problem.</p>
</li><li>
<p>If you can&#39;t find a ticket addressing your issue, <a href="https://bugs.ruby-lang.org/projects/ruby-trunk/issues/new">create a new one</a>.</p>
</li><li>
<p>Choose the target version, usually current. Bugs will be first fixed in the current release and then <a href="#label-Backport+Requests">backported</a>.</p>
</li><li>
<p>Fill in the Ruby version you&#39;re using when experiencing this issue (<code>ruby -v</code>).</p>
</li><li>
<p>Attach any logs or reproducible programs to provide additional information. Reproducible scripts should be as small as possible.</p>
</li><li>
<p>Briefly describe your problem.  A 2-3 sentence description will help give a quick response.</p>
</li><li>
<p>Pick a category, such as core for common problems, or lib for a standard library.</p>
</li><li>
<p>Check the <a href="https://bugs.ruby-lang.org/projects/ruby/wiki/Maintainers">Maintainers list</a> and assign the ticket if there is an active maintainer for the library or feature.</p>
</li><li>
<p>If the ticket doesn&#39;t have any replies after 10 days, you can send a reminder.</p>
</li><li>
<p>Please reply to feedback requests. If a bug report doesn&#39;t get any feedback, it&#39;ll eventually get rejected.</p>
</li></ul>

<h3 id="label-Reporting+to+downstream+distributions">Reporting to downstream distributions<span><a href="#label-Reporting+to+downstream+distributions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can report downstream issues for the following distributions via their bug tracker:</p>
<ul><li>
<p><a href="https://bugs.debian.org/cgi-bin/pkgreport.cgi?src=ruby-defaults">debian</a></p>
</li><li>
<p><a href="http://www.freebsd.org/cgi/query-pr-summary.cgi?text=ruby">freebsd</a></p>
</li><li>
<p><a href="https://bugzilla.redhat.com/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=MODIFIED">redhat</a></p>
</li><li>
<p><a href="https://trac.macports.org/query?status=assigned&status=new&status=reopened&port=~ruby">macports</a></p>
</li><li>
<p>etc (add your distribution bug tracker here)</p>
</li></ul>

<h3 id="label-Platform+Maintainers">Platform Maintainers<span><a href="#label-Platform+Maintainers">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>For platform specific bugs in Ruby, you can assign your ticket to the current maintainer for a specific platform.</p>

<p>The current active platform maintainers are as follows:</p>
<dl class="rdoc-list label-list"><dt>mswin64 (Microsoft Windows)
<dd>
<p>NAKAMURA Usaku (usa)</p>
</dd><dt>mingw32 (Minimalist GNU for Windows)
<dd>
<p>Nobuyoshi Nakada (nobu)</p>
</dd><dt>AIX
<dd>
<p>Yutaka Kanemoto (kanemoto)</p>
</dd><dt>FreeBSD
<dd>
<p>Akinori MUSHA (knu)</p>
</dd><dt>Solaris
<dd>
<p>Naohisa Goto (ngoto)</p>
</dd><dt>RHEL, CentOS
<dd>
<p>KOSAKI Motohiro (kosaki)</p>
</dd><dt>macOS
<dd>
<p>Kenta Murata (mrkn)</p>
</dd><dt>OpenBSD
<dd>
<p>Jeremy Evans (jeremyevans0)</p>
</dd><dt>cygwin, bcc32, djgpp, wince, …
<dd>
<p>none. (Maintainer WANTED)</p>
</dd></dl>

<h2 id="label-Reporting+Security+Issues">Reporting Security Issues<span><a href="#label-Reporting+Security+Issues">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Security vulnerabilities receive special treatment since they may negatively affect many users. There is a private mailing list that all security issues should be reported to and will be handled discretely. Email the <a href="mailto:security@ruby-lang.org">security@ruby-lang.org</a> list and the problem will be published after fixes have been released. You can also encrypt the issue using <a href="https://www.ruby-lang.org/security.asc">the PGP public key</a> for the list.</p>

<h2 id="label-Reporting+Other+Issues">Reporting Other Issues<span><a href="#label-Reporting+Other+Issues">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;re having an issue with the website, or maybe the mailing list, you can contact the webmaster to help resolve the problem.</p>

<p>The current webmaster is:</p>
<ul><li>
<p>Hiroshi SHIBATA (hsbt)</p>
</li></ul>

<p>You can also report issues with the ruby-lang.org website on the issue tracker:</p>
<ul><li>
<p><a href="https://github.com/ruby/www.ruby-lang.org/issues">issue tracker</a></p>
</li></ul>

<h2 id="label-Resolve+Existing+Issues">Resolve Existing Issues<span><a href="#label-Resolve+Existing+Issues">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>As a next step beyond reporting issues you can help the core team resolve existing issues. If you check the Everyone&#39;s Issues list in GitHub Issues, you will find a lot of issues already requiring attention. What can you do for these? Quite a bit, actually:</p>

<p>When a bug report goes for a while without any feedback, it goes to the bug graveyard which is unfortunate. If you check the <a href="https://bugs.ruby-lang.org/projects/ruby-trunk/issues">issues list</a> you will find lots of delinquent bugs that require attention.</p>

<p>You can help by verifying the existing tickets, try to reproduce the reported issue on your own and comment if you still experience the bug. Some issues lack attention because of too much ambiguity, to help you can narrow down the problem and provide more specific details or instructions to reproduce the bug. You might also try contributing a failing test in the form of a patch, which we will cover later in this guide.</p>

<p>It may also help to try out patches other contributors have submitted to redmine, if gone without notice. In this case the <code>patch</code> command is your friend, see <code>man patch</code> for more information. Basically this would go something like this:</p>

<pre class="ruby"><span class="ruby-identifier">cd</span> <span class="ruby-identifier">path</span><span class="ruby-operator">/</span><span class="ruby-identifier">to</span><span class="ruby-operator">/</span><span class="ruby-identifier">ruby</span>
<span class="ruby-identifier">patch</span> <span class="ruby-operator">-</span><span class="ruby-identifier">p0</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">path</span><span class="ruby-operator">/</span><span class="ruby-identifier">to</span><span class="ruby-operator">/</span><span class="ruby-identifier">patch</span>
</pre>

<p>You will then be prompted to apply the patch with the associated files. After building ruby again, you should try to run the tests and verify if the change actually worked or fixed the bug. It&#39;s important to provide valuable feedback on the patch that can help reach the overall goal, try to answer some of these questions:</p>
<ul><li>
<p>What do you like about this change?</p>
</li><li>
<p>What would you do differently?</p>
</li><li>
<p>Are there any other edge cases not tested?</p>
</li><li>
<p>Is there any documentation that would be affected by this change?</p>
</li></ul>

<p>If you can answer some or all of these questions, you&#39;re on the right track. If your comment simply says “+1”, then odds are that other reviewers aren&#39;t going to take it too seriously. Show that you took the time to review the patch.</p>

<h2 id="label-How+To+Request+Features">How To Request Features<span><a href="#label-How+To+Request+Features">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If there&#39;s a new feature that you want to see added to Ruby, you will need to write a convincing proposal and patch to implement the feature.</p>

<p>For new features in CRuby, use the <a href="https://bugs.ruby-lang.org/projects/ruby-trunk/issues?set_filter=1&tracker_id=2">‘Feature’ tracker</a> on ruby-master. For non-CRuby dependent features, features that would apply to alternate Ruby implementations such as JRuby and Rubinius, use the <a href="https://bugs.ruby-lang.org/projects/common-ruby">CommonRuby tracker</a>.</p>

<p>When writing a proposal be sure to check for previous discussions on the topic and have a solid use case. You will need to be persuasive and convince Matz on your new feature. You should also consider the potential compatibility issues that this new feature might raise.</p>

<p>Consider making your feature into a gem, and if there are enough people who benefit from your feature it could help persuade ruby-core. Although feature requests can seem like an alluring way to contribute to Ruby, often these discussions can lead nowhere and exhaust time and energy that could be better spent fixing bugs. Choose your battles.</p>

<p>A good template for a feature proposal should look something like this:</p>
<dl class="rdoc-list label-list"><dt>Abstract
<dd>
<p>Summary of your feature</p>
</dd><dt>Background
<dd>
<p>Describe current behavior and why it is problem. Related work, such as solutions in other language helps us to understand the problem.</p>
</dd><dt>Proposal
<dd>
<p>Describe your proposal in details</p>
</dd><dt>Details
<dd>
<p>If it has complicated feature, describe it</p>
</dd><dt>Usecase
<dd>
<p>How would your feature be used? Who will benefit from it?</p>
</dd><dt>Discussion
<dd>
<p>Discuss about this proposal. A list of pros and cons will help start discussion.</p>
</dd><dt>Limitation
<dd>
<p>Limitation of your proposal</p>
</dd><dt>Another alternative proposal
<dd>
<p>If there are alternative proposals, show them.</p>
</dd><dt>See also
<dd>
<p>Links to the other related resources</p>
</dd></dl>

<h3 id="label-Slideshow">Slideshow<span><a href="#label-Slideshow">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>At the Ruby Developer Meeting in Japan, committers discuss Feature Proposals together in Tokyo. We will judge proposals and then accept, reject, or give feedback for them. If you have a stalled proposal, making a slide to submit is good way to get feedback.</p>

<p>Slides should be:</p>
<ul><li>
<p>One-page slide</p>
</li><li>
<p>Include a corresponding ticket number</p>
</li><li>
<p>MUST include a figure and/or short example code</p>
</li><li>
<p>SHOULD have less sentence in natural language (try to write less than 140 characters)</p>
</li><li>
<p>It is RECOMMENDED to itemize: motivation/use case, proposal, pros/cons, corner case</p>
</li><li>
<p>PDF or Image (Web browsers can show it)</p>
</li></ul>

<p>Please note:</p>
<ul><li>
<p>Even if the proposal is generally acceptable, it won&#39;t be accepted without writing corner cases in the ticket</p>
</li><li>
<p>Slide&#39;s example: DevelopersMeeting20130727Japan</p>
</li></ul>

<h2 id="label-Backport+Requests">Backport Requests<span><a href="#label-Backport+Requests">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>When a new version of Ruby is released, it starts at patch level 0 (p0), and bugs will be fixed first on the master branch. If it&#39;s determined that a bug exists in a previous version of Ruby that is still in the bug fix stage of maintenance, then a patch will be backported. After the maintenance stage of a particular Ruby version ends, it goes into “security fix only” mode which means only security related vulnerabilities will be backported. Versions in End-of-life (EOL) will not receive any updates and it is recommended you upgrade as soon as possible.</p>

<p>If a major security issue is found or after a certain amount of time since the last patch level release, a new patch-level release will be made.</p>

<p>When submitting a backport request please confirm the bug has been fixed in newer versions and exists in maintenance mode versions. There is a backport tracker for each major version still in maintenance where you can request a particular revision merged in the affected version of Ruby.</p>

<p>Each major version of Ruby has a release manager that should be assigned to handle backport requests. You can find the list of release managers on the <a href="https://bugs.ruby-lang.org/projects/ruby/wiki/ReleaseEngineering">wiki</a>.</p>

<h3 id="label-Branches">Branches<span><a href="#label-Branches">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Status and maintainers of branches are listed on the <a href="https://bugs.ruby-lang.org/projects/ruby/wiki/ReleaseEngineering">wiki</a>.</p>

<h2 id="label-Running+tests">Running tests<span><a href="#label-Running+tests">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>In order to help resolve existing issues and contributing patches to Ruby you need to be able to run the test suite.</p>

<p>CRuby uses git for source control, the <a href="https://git-scm.com/">git homepage</a> has installation instructions with links to documentation for learning more about git. There is a mirror of the repository on <a href="https://github.com/ruby/ruby">github</a>. For other resources see the <a href="https://www.ruby-lang.org/en/community/ruby-core/">ruby-core documentation on ruby-lang.org</a>.</p>

<p>Install the prerequisite dependencies for building the CRuby interpreter to run tests.</p>
<ul><li>
<p>C compiler</p>
</li><li>
<p>autoconf - 2.67 or later, preferably 2.69.</p>
</li><li>
<p>bison - 2.0 or later, preferably 3.4.</p>
</li><li>
<p>gperf - 3.0.3 or later, preferably 3.1.</p>
</li><li>
<p>ruby - Ruby itself is prerequisite in order to build Ruby from source. It can be 1.8.</p>
</li></ul>

<p>You should also have access to development headers for the following libraries, but these are not required:</p>
<ul><li>
<p>NDBM/QDBM</p>
</li><li>
<p><a href="GDBM.html"><code>GDBM</code></a></p>
</li><li>
<p>OpenSSL/LibreSSL</p>
</li><li>
<p>readline/editline(libedit)</p>
</li><li>
<p>zlib</p>
</li><li>
<p>libffi</p>
</li><li>
<p>libyaml</p>
</li><li>
<p>libexecinfo (FreeBSD)</p>
</li></ul>

<p>Now let&#39;s build CRuby:</p>
<ul><li>
<p>Checkout the CRuby source code:</p>

<pre>git clone https://github.com/ruby/ruby.git ruby-master</pre>
</li><li>
<p>Generate the configuration files and build:</p>

<pre>cd ruby-master
autoconf
mkdir build &amp;&amp; cd build # its good practice to build outside of source dir
mkdir ~/.rubies # we will install to .rubies/ruby-master in our home dir
../configure --prefix=&quot;${HOME}/.rubies/ruby-master&quot;
make up &amp;&amp; make install</pre>
</li></ul>

<p>After adding Ruby to your PATH, you should be ready to run the test suite:</p>

<pre class="ruby"><span class="ruby-identifier">make</span> <span class="ruby-identifier">test</span>
</pre>

<p>You can also use <code>test-all</code> to run all of the tests with the RUNRUBY interpreter just built. Use TESTS or RUNRUBYOPT to pass parameters, such as:</p>

<pre>make test-all TESTS=-v</pre>

<p>This is also how you can run a specific test from our build dir:</p>

<pre>make test-all TESTS=drb/test_drb.rb</pre>

<p>You can run <code>test</code> and <code>test-all</code> at once by <code>check</code> .</p>

<pre class="ruby"><span class="ruby-identifier">make</span> <span class="ruby-identifier">check</span>
</pre>

<p>For older versions of Ruby you will need to run the build setup again after checking out the associated branch in git, for example if you wanted to checkout 1.9.3:</p>

<pre>git clone https://github.com/ruby/ruby.git --branch ruby_1_9_3</pre>

<p>Once you checked out the source code, you can update the local copy by:</p>

<pre class="ruby"><span class="ruby-identifier">make</span> <span class="ruby-identifier">up</span>
</pre>

<p>Or, update, build, install and check, by just:</p>

<pre class="ruby"><span class="ruby-identifier">make</span> <span class="ruby-identifier">love</span>
</pre>

<h2 id="label-Contributing+Documentation">Contributing Documentation<span><a href="#label-Contributing+Documentation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;re interested in contributing documentation directly to CRuby there is some information available at <a href="https://github.com/ruby/ruby#contributing">Contributing</a>.</p>

<p>There is also the <a href="https://github.com/rurema/doctree/wiki">Ruby Reference Manual</a> in Japanese.</p>

<h2 id="label-Contributing+A+Patch">Contributing A Patch<span><a href="#label-Contributing+A+Patch">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Deciding+what+to+patch">Deciding what to patch<span><a href="#label-Deciding+what+to+patch">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Before you submit a patch, there are a few things you should know:</p>
<ul><li>
<p>Pay attention to the maintenance policy for stable and maintained versions of Ruby.</p>
</li><li>
<p>Released versions in security mode will not merge feature changes.</p>
</li><li>
<p>Search for previous discussions on ruby-core to verify the maintenance policy</p>
</li><li>
<p>Patches must be distributed under Ruby&#39;s license.</p>
</li><li>
<p>This license may change in the future, you must join the discussion if you don&#39;t agree to the change</p>
</li></ul>

<p>To improve the chance your patch will be accepted please follow these simple rules:</p>
<ul><li>
<p>Bug fixes should be committed on master first</p>
</li><li>
<p>Format of the patch file must be a unified diff (ie: diff -pu, svn diff, or git diff)</p>
</li><li>
<p>Don&#39;t introduce cosmetic changes</p>
</li><li>
<p>Follow the original coding style of the code</p>
</li><li>
<p>Don&#39;t mix different changes in one commit</p>
</li></ul>

<p>First thing you should do is check out the code if you haven&#39;t already:</p>

<pre>git clone https://github.com/ruby/ruby.git ruby-master</pre>

<p>Now create a dedicated branch:</p>

<pre>cd ruby-master
git checkout -b my_new_branch</pre>

<p>The name of your branch doesn&#39;t really matter because it will only exist on your local computer and won&#39;t be part of the official Ruby repository. It will be used to create patches based on the differences between your branch and master, or edge Ruby.</p>

<h3 id="label-Coding+style">Coding style<span><a href="#label-Coding+style">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Here are some general rules to follow when writing Ruby and C code for CRuby:</p>
<ul><li>
<p>Indent 4 spaces for C without tabs (old codes might use tabs for eight-space indentation, but newer codes recommend to use spaces only)</p>
</li><li>
<p>Indent 2 space tabs for Ruby</p>
</li><li>
<p>Do not use TABs in ruby codes</p>
</li><li>
<p>ANSI C style for 1.9+ for function declarations</p>
</li><li>
<p>Follow C90 (not C99) Standard</p>
</li><li>
<p>PascalStyle for class/module names.</p>
</li><li>
<p>UNDERSCORE_SEPARATED_UPPER_CASE for other constants.</p>
</li><li>
<p>Capitalize words.</p>
</li><li>
<p>ABBRs should be all upper case.</p>
</li><li>
<p>Do as others do</p>
</li></ul>

<h3 id="label-Commit+messages">Commit messages<span><a href="#label-Commit+messages">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>When you&#39;re ready to commit:</p>

<pre class="ruby"><span class="ruby-identifier">git</span> <span class="ruby-identifier">commit</span> <span class="ruby-identifier">path</span><span class="ruby-operator">/</span><span class="ruby-identifier">to</span><span class="ruby-operator">/</span><span class="ruby-identifier">files</span>
</pre>

<p>This will open your editor in which you write your commit message. Use the following style for commit messages:</p>
<ul><li>
<p>Use a succinct subject line.</p>
</li><li>
<p>Include reasoning behind the change in the commit message, focusing on why the change is being made.</p>
</li><li>
<p>Refer to redmine issue (such as Fixes [Bug #1234] or Implements [Feature #3456]), or discussion on the mailing list (such as [ruby-core:12345]).</p>
</li><li>
<p>For GitHub issues, use [GH-#] (such as [Fixes GH-234]).</p>
</li><li>
<p>Follow the style used by other committers.</p>
</li></ul>

<h3 id="label-Contributing+your+code">Contributing your code<span><a href="#label-Contributing+your+code">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Now that you&#39;ve got some code you want to contribute, let&#39;s get set up to generate a patch. Start by forking the github mirror, check the <a href="https://help.github.com/articles/fork-a-repo">github docs on forking</a> if you get stuck here. You will only need a github account if you intend to host your repository on github.</p>

<p>Next copy the writable url for your fork and add it as a git remote, replace “my_username” with your github account name:</p>

<pre class="ruby"><span class="ruby-identifier">git</span> <span class="ruby-identifier">remote</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">my_fork</span> <span class="ruby-identifier">git</span><span class="ruby-ivar">@github</span>.<span class="ruby-identifier">com</span><span class="ruby-value">:my_username</span><span class="ruby-operator">/</span><span class="ruby-identifier">ruby</span>.<span class="ruby-identifier">git</span>
<span class="ruby-comment"># Now we can push our branch to our fork</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">push</span> <span class="ruby-identifier">my_fork</span> <span class="ruby-identifier">my_new_branch</span>
</pre>

<p>In order to generate a patch that you can upload to the bug tracker, we can use the github interface to review our changes just visit <a href="https://github.com/my_username/ruby/compare/master...my_new_branch">github.com/my_username/ruby/compare/master…my_new_branch</a></p>

<p>Next, you can simply add &#39;.patch&#39; to the end of this URL and it will generate the patch for you, save the file to your computer and upload it to the bug tracker. Alternatively you can submit a pull request, but for the best chances to receive feedback add it is recommended you add it to redmine.</p>

<p>Since git is a distributed system, you are welcome to host your git repository on any <a href="https://git.wiki.kernel.org/index.php/GitHosting">publicly accessible hosting site</a>, including <a href="https://www.kernel.org/pub/software/scm/git/docs/user-manual.html#public-repositories">hosting your own</a> You may use the <a href="https://git-scm.com/docs/git-format-patch">‘git format-patch’</a> command to generate patch files to upload to redmine.  You may also use the <a href="https://git-scm.com/docs/git-request-pull">‘git request-pull’</a> command for formatting pull request messages to redmine.</p>

<h3 id="label-Updating+the+official+repository">Updating the official repository<span><a href="#label-Updating+the+official+repository">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>If you are a committer, you can push changes directly into the official repository:</p>

<pre>git push origin your-branch-name:master</pre>

<p>However, it is likely will have become outdated, and you will have to update it.  In that case, run:</p>

<pre class="ruby"><span class="ruby-identifier">git</span> <span class="ruby-identifier">fetch</span> <span class="ruby-identifier">origin</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">rebase</span> <span class="ruby-identifier">remotes</span><span class="ruby-operator">/</span><span class="ruby-identifier">origin</span><span class="ruby-operator">/</span><span class="ruby-identifier">master</span>
</pre>

<p>and then try pushing your changes again.</p>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

