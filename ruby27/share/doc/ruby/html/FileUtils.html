<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module FileUtils - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#module-FileUtils-label-fileutils.rb">fileutils.rb</a>
    <li><a href="#module-FileUtils-label-module+FileUtils">module FileUtils</a>
    <li><a href="#module-FileUtils-label-Module+Functions">Module Functions</a>
    <li><a href="#module-FileUtils-label-module+FileUtils-3A-3AVerbose">module FileUtils::Verbose</a>
    <li><a href="#module-FileUtils-label-module+FileUtils-3A-3ANoWrite">module FileUtils::NoWrite</a>
    <li><a href="#module-FileUtils-label-module+FileUtils-3A-3ADryRun">module FileUtils::DryRun</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="FileUtils/StreamUtils_.html">FileUtils::StreamUtils_</a>
  
  
  </ul>
</div>

    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><a class="extend" href="FileUtils/StreamUtils_.html">FileUtils::StreamUtils_</a>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-cd">::cd</a>
    
    <li ><a href="#method-c-chdir">::chdir</a>
    
    <li ><a href="#method-c-chmod">::chmod</a>
    
    <li ><a href="#method-c-chmod_R">::chmod_R</a>
    
    <li ><a href="#method-c-chown">::chown</a>
    
    <li ><a href="#method-c-chown_R">::chown_R</a>
    
    <li ><a href="#method-c-cmp">::cmp</a>
    
    <li ><a href="#method-c-collect_method">::collect_method</a>
    
    <li ><a href="#method-c-commands">::commands</a>
    
    <li ><a href="#method-c-compare_file">::compare_file</a>
    
    <li ><a href="#method-c-compare_stream">::compare_stream</a>
    
    <li ><a href="#method-c-copy">::copy</a>
    
    <li ><a href="#method-c-copy_entry">::copy_entry</a>
    
    <li ><a href="#method-c-copy_file">::copy_file</a>
    
    <li ><a href="#method-c-copy_stream">::copy_stream</a>
    
    <li ><a href="#method-c-cp">::cp</a>
    
    <li ><a href="#method-c-cp_lr">::cp_lr</a>
    
    <li ><a href="#method-c-cp_r">::cp_r</a>
    
    <li ><a href="#method-c-getwd">::getwd</a>
    
    <li ><a href="#method-c-have_option-3F">::have_option?</a>
    
    <li ><a href="#method-c-identical-3F">::identical?</a>
    
    <li ><a href="#method-c-install">::install</a>
    
    <li ><a href="#method-c-link">::link</a>
    
    <li ><a href="#method-c-link_entry">::link_entry</a>
    
    <li ><a href="#method-c-ln">::ln</a>
    
    <li ><a href="#method-c-ln_s">::ln_s</a>
    
    <li ><a href="#method-c-ln_sf">::ln_sf</a>
    
    <li ><a href="#method-c-makedirs">::makedirs</a>
    
    <li ><a href="#method-c-mkdir">::mkdir</a>
    
    <li ><a href="#method-c-mkdir_p">::mkdir_p</a>
    
    <li ><a href="#method-c-mkpath">::mkpath</a>
    
    <li ><a href="#method-c-move">::move</a>
    
    <li ><a href="#method-c-mv">::mv</a>
    
    <li ><a href="#method-c-options">::options</a>
    
    <li ><a href="#method-c-options_of">::options_of</a>
    
    <li ><a href="#method-c-pwd">::pwd</a>
    
    <li ><a href="#method-c-remove">::remove</a>
    
    <li ><a href="#method-c-remove_dir">::remove_dir</a>
    
    <li ><a href="#method-c-remove_entry">::remove_entry</a>
    
    <li ><a href="#method-c-remove_entry_secure">::remove_entry_secure</a>
    
    <li ><a href="#method-c-remove_file">::remove_file</a>
    
    <li ><a href="#method-c-rm">::rm</a>
    
    <li ><a href="#method-c-rm_f">::rm_f</a>
    
    <li ><a href="#method-c-rm_r">::rm_r</a>
    
    <li ><a href="#method-c-rm_rf">::rm_rf</a>
    
    <li ><a href="#method-c-rmdir">::rmdir</a>
    
    <li ><a href="#method-c-rmtree">::rmtree</a>
    
    <li ><a href="#method-c-safe_unlink">::safe_unlink</a>
    
    <li ><a href="#method-c-symlink">::symlink</a>
    
    <li ><a href="#method-c-touch">::touch</a>
    
    <li ><a href="#method-c-uptodate-3F">::uptodate?</a>
    
    <li ><a href="#method-i-cd">#cd</a>
    
    <li ><a href="#method-i-chdir">#chdir</a>
    
    <li ><a href="#method-i-chmod">#chmod</a>
    
    <li ><a href="#method-i-chmod_R">#chmod_R</a>
    
    <li ><a href="#method-i-chown">#chown</a>
    
    <li ><a href="#method-i-chown_R">#chown_R</a>
    
    <li ><a href="#method-i-cmp">#cmp</a>
    
    <li ><a href="#method-i-compare_file">#compare_file</a>
    
    <li ><a href="#method-i-compare_stream">#compare_stream</a>
    
    <li ><a href="#method-i-copy">#copy</a>
    
    <li ><a href="#method-i-copy_entry">#copy_entry</a>
    
    <li ><a href="#method-i-copy_file">#copy_file</a>
    
    <li ><a href="#method-i-copy_stream">#copy_stream</a>
    
    <li ><a href="#method-i-cp">#cp</a>
    
    <li ><a href="#method-i-cp_lr">#cp_lr</a>
    
    <li ><a href="#method-i-cp_r">#cp_r</a>
    
    <li ><a href="#method-i-getwd">#getwd</a>
    
    <li ><a href="#method-i-identical-3F">#identical?</a>
    
    <li ><a href="#method-i-install">#install</a>
    
    <li ><a href="#method-i-link">#link</a>
    
    <li ><a href="#method-i-link_entry">#link_entry</a>
    
    <li ><a href="#method-i-ln">#ln</a>
    
    <li ><a href="#method-i-ln_s">#ln_s</a>
    
    <li ><a href="#method-i-ln_sf">#ln_sf</a>
    
    <li ><a href="#method-i-makedirs">#makedirs</a>
    
    <li ><a href="#method-i-mkdir">#mkdir</a>
    
    <li ><a href="#method-i-mkdir_p">#mkdir_p</a>
    
    <li ><a href="#method-i-mkpath">#mkpath</a>
    
    <li ><a href="#method-i-move">#move</a>
    
    <li ><a href="#method-i-mv">#mv</a>
    
    <li ><a href="#method-i-pwd">#pwd</a>
    
    <li ><a href="#method-i-remove">#remove</a>
    
    <li ><a href="#method-i-remove_dir">#remove_dir</a>
    
    <li ><a href="#method-i-remove_entry">#remove_entry</a>
    
    <li ><a href="#method-i-remove_entry_secure">#remove_entry_secure</a>
    
    <li ><a href="#method-i-remove_file">#remove_file</a>
    
    <li ><a href="#method-i-rm">#rm</a>
    
    <li ><a href="#method-i-rm_f">#rm_f</a>
    
    <li ><a href="#method-i-rm_r">#rm_r</a>
    
    <li ><a href="#method-i-rm_rf">#rm_rf</a>
    
    <li ><a href="#method-i-rmdir">#rmdir</a>
    
    <li ><a href="#method-i-rmtree">#rmtree</a>
    
    <li ><a href="#method-i-safe_unlink">#safe_unlink</a>
    
    <li ><a href="#method-i-symlink">#symlink</a>
    
    <li ><a href="#method-i-touch">#touch</a>
    
    <li ><a href="#method-i-uptodate-3F">#uptodate?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-FileUtils">
  <h1 id="module-FileUtils" class="module">
    module FileUtils
  </h1>

  <section class="description">
    
<h1 id="module-FileUtils-label-fileutils.rb">fileutils.rb<span><a href="#module-FileUtils-label-fileutils.rb">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Copyright © 2000-2007 Minero Aoki</p>

<p>This program is free software. You can distribute/modify this program under the same terms of ruby.</p>

<h2 id="module-FileUtils-label-module+FileUtils">module <a href="FileUtils.html"><code>FileUtils</code></a><span><a href="#module-FileUtils-label-module+FileUtils">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Namespace for several file utility methods for copying, moving, removing, etc.</p>

<h3 id="module-FileUtils-label-Module+Functions"><a href="Module.html"><code>Module</code></a> Functions<span><a href="#module-FileUtils-label-Module+Functions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;fileutils&#39;</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span> <span class="ruby-identifier">block</span> }
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">pwd</span>()
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">link</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">link</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_sf</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">link</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
</pre>

<p>Possible <code>options</code> are:</p>
<dl class="rdoc-list note-list"><dt><code>:force</code> 
<dd>
<p>forced operation (rewrite files if exist, remove directories if not empty, etc.);</p>
</dd><dt><code>:verbose</code> 
<dd>
<p>print command to be run, in bash syntax, before performing it;</p>
</dd><dt><code>:preserve</code> 
<dd>
<p>preserve object&#39;s group, user and modification time on copying;</p>
</dd><dt><code>:noop</code> 
<dd>
<p>no changes are made (usable in combination with <code>:verbose</code> which will print the command to run)</p>
</dd></dl>

<p>Each method documents the options that it honours. See also <a href="FileUtils.html#method-c-commands"><code>::commands</code></a>, <a href="FileUtils.html#method-c-options"><code>::options</code></a> and <a href="FileUtils.html#method-c-options_of"><code>::options_of</code></a> methods to introspect which command have which options.</p>

<p>All methods that have the concept of a “source” file or directory can take either one file or a list of files in that argument.  See the method documentation for examples.</p>

<p>There are some `low level&#39; methods, which do not accept keyword arguments:</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword">true</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">srcstream</span>, <span class="ruby-identifier">deststream</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">path_a</span>, <span class="ruby-identifier">path_b</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">stream_a</span>, <span class="ruby-identifier">stream_b</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">cmp_list</span>)
</pre>

<h2 id="module-FileUtils-label-module+FileUtils-3A-3AVerbose">module <a href="FileUtils/Verbose.html"><code>FileUtils::Verbose</code></a><span><a href="#module-FileUtils-label-module+FileUtils-3A-3AVerbose">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>This module has all methods of <a href="FileUtils.html"><code>FileUtils</code></a> module, but it outputs messages before acting.  This equates to passing the <code>:verbose</code> flag to methods in <a href="FileUtils.html"><code>FileUtils</code></a>.</p>

<h2 id="module-FileUtils-label-module+FileUtils-3A-3ANoWrite">module <a href="FileUtils/NoWrite.html"><code>FileUtils::NoWrite</code></a><span><a href="#module-FileUtils-label-module+FileUtils-3A-3ANoWrite">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>This module has all methods of <a href="FileUtils.html"><code>FileUtils</code></a> module, but never changes files/directories.  This equates to passing the <code>:noop</code> flag to methods in <a href="FileUtils.html"><code>FileUtils</code></a>.</p>

<h2 id="module-FileUtils-label-module+FileUtils-3A-3ADryRun">module <a href="FileUtils/DryRun.html"><code>FileUtils::DryRun</code></a><span><a href="#module-FileUtils-label-module+FileUtils-3A-3ADryRun">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>This module has all methods of <a href="FileUtils.html"><code>FileUtils</code></a> module, but never changes files/directories.  This equates to passing the <code>:noop</code> and <code>:verbose</code> flags to methods in <a href="FileUtils.html"><code>FileUtils</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="VERSION">VERSION
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-cd" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cd</span><span
            class="method-args">(dir, verbose: nil) { |dir| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes the current directory to the directory <code>dir</code>.</p>

<p>If this method is called with block, resumes to the previous working directory after the block execution has finished.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>)  <span class="ruby-comment"># change directory</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>)   <span class="ruby-comment"># change directory and report it</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>) <span class="ruby-keyword">do</span>  <span class="ruby-comment"># change directory</span>
  <span class="ruby-comment"># ...               # do something</span>
<span class="ruby-keyword">end</span>                   <span class="ruby-comment"># return to original directory</span>
</pre>
          
          

          
          <div class="method-source-code" id="cd-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: dir</span>
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-string">&#39;cd -&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-chdir">chdir</a>
        </div>
        

        
      </div>

    
      <div id="method-c-chdir" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">chdir</span><span
            class="method-args">(dir, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-cd">cd</a>
        </div>
        
      </div>

    
      <div id="method-c-chmod" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chmod</span><span
            class="method-args">(mode, list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes permission bits on the named files (in <code>list</code>) to the bit pattern represented by <code>mode</code>.</p>

<p><code>mode</code> is the symbolic and absolute mode can be used.</p>

<p>Absolute mode is</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0755</span>, <span class="ruby-string">&#39;somecommand&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0644</span>, <span class="ruby-node">%w(my.rb your.rb his.rb her.rb)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0755</span>, <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>

<p>Symbolic mode is</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wrx,go=rx&quot;</span>, <span class="ruby-string">&#39;somecommand&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wr,go=rr&quot;</span>, <span class="ruby-node">%w(my.rb your.rb his.rb her.rb)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wrx,go=rx&quot;</span>, <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
<dl class="rdoc-list note-list"><dt>“a” 
<dd>
<p>is user, group, other mask.</p>
</dd><dt>“u” 
<dd>
<p>is user&#39;s mask.</p>
</dd><dt>“g” 
<dd>
<p>is group&#39;s mask.</p>
</dd><dt>“o” 
<dd>
<p>is other&#39;s mask.</p>
</dd><dt>“w” 
<dd>
<p>is write permission.</p>
</dd><dt>“r” 
<dd>
<p>is read permission.</p>
</dd><dt>“x” 
<dd>
<p>is execute permission.</p>
</dd><dt>“X” 
<dd>
<p>is execute permission for directories only, must be used in conjunction with “+”</p>
</dd><dt>“s” 
<dd>
<p>is uid, gid.</p>
</dd><dt>“t” 
<dd>
<p>is sticky bit.</p>
</dd><dt>“+” 
<dd>
<p>is added to a class given the specified mode.</p>
</dd><dt>“-” 
<dd>
<p>Is removed from a given class given mode.</p>
</dd><dt>“=” 
<dd>
<p>Is the exact nature of the class will be given a specified mode.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="chmod-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1012</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod %s %s&#39;</span>, <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">path</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-chmod_R" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chmod_R</span><span
            class="method-args">(mode, list, noop: nil, verbose: nil, force: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes permission bits on the named files (in <code>list</code>) to the bit pattern represented by <code>mode</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod_R</span> <span class="ruby-value">0700</span>, <span class="ruby-node">&quot;/tmp/app.#{$$}&quot;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod_R</span> <span class="ruby-string">&quot;u=wrx&quot;</span>, <span class="ruby-node">&quot;/tmp/app.#{$$}&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="chmod_R-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1029</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">path</span>))
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-chown" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chown</span><span
            class="method-args">(user, group, list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes owner and group on the named files (in <code>list</code>) to the user <code>user</code> and the group <code>group</code>.  <code>user</code> and <code>group</code> may be an ID (Integer/String) or a name (<a href="String.html"><code>String</code></a>). If <code>user</code> or <code>group</code> is nil, this method does not change the attribute.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown</span> <span class="ruby-string">&#39;root&#39;</span>, <span class="ruby-string">&#39;staff&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown</span> <span class="ruby-keyword">nil</span>, <span class="ruby-string">&#39;bin&#39;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/usr/bin/*&#39;</span>), <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="chown-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1057</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown %s %s&#39;</span>,
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-chown_R" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chown_R</span><span
            class="method-args">(user, group, list, noop: nil, verbose: nil, force: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes owner and group on the named files (in <code>list</code>) to the user <code>user</code> and the group <code>group</code> recursively. <code>user</code> and <code>group</code> may be an ID (Integer/String) or a name (<a href="String.html"><code>String</code></a>).  If <code>user</code> or <code>group</code> is nil, this method does not change the attribute.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown_R</span> <span class="ruby-string">&#39;www&#39;</span>, <span class="ruby-string">&#39;www&#39;</span>, <span class="ruby-string">&#39;/var/www/htdocs&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown_R</span> <span class="ruby-string">&#39;cvs&#39;</span>, <span class="ruby-string">&#39;cvs&#39;</span>, <span class="ruby-string">&#39;/var/cvs&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="chown_R-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1081</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-cmp" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">cmp</span><span
            class="method-args">(a, b)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
        </div>
        
      </div>

    
      <div id="method-c-collect_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collect_method</span><span
            class="method-args">(opt)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="Array.html"><code>Array</code></a> of methods names which have the option <code>opt</code>.</p>

<pre class="ruby"><span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">collect_method</span>(<span class="ruby-value">:preserve</span>) <span class="ruby-comment">#=&gt; [&quot;cp&quot;, &quot;cp_r&quot;, &quot;copy&quot;, &quot;install&quot;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="collect_method-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1679</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">collect_method</span>(<span class="ruby-identifier">opt</span>)
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">m</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-commands" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">commands</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="Array.html"><code>Array</code></a> of names of high-level methods that accept any keyword arguments.</p>

<pre class="ruby"><span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">commands</span>  <span class="ruby-comment">#=&gt; [&quot;chmod&quot;, &quot;cp&quot;, &quot;cp_r&quot;, &quot;install&quot;, ...]</span>
</pre>
          
          

          
          <div class="method-source-code" id="commands-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1640</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">commands</span>
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-compare_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_file</span><span
            class="method-args">(a, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the contents of a file <code>a</code> and a file <code>b</code> are identical.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_file</span>(<span class="ruby-string">&#39;somefile&#39;</span>, <span class="ruby-string">&#39;somefile&#39;</span>)       <span class="ruby-comment">#=&gt; true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_file</span>(<span class="ruby-string">&#39;/dev/null&#39;</span>, <span class="ruby-string">&#39;/dev/urandom&#39;</span>)  <span class="ruby-comment">#=&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="compare_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 816</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
    }
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-identical-3F">identical?</a>, <a href="FileUtils.html#method-i-cmp">cmp</a>
        </div>
        

        
      </div>

    
      <div id="method-c-compare_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_stream</span><span
            class="method-args">(a, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the contents of a stream <code>a</code> and <code>b</code> are identical.</p>
          
          

          
          <div class="method-source-code" id="compare_stream-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 834</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;2.4&quot;</span>
    <span class="ruby-identifier">sa</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)
    <span class="ruby-identifier">sb</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">sa</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">sb</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sa</span>)
    <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sb</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-copy" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">copy</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-cp">cp</a>
        </div>
        
      </div>

    
      <div id="method-c-copy_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_entry</span><span
            class="method-args">(src, dest, preserve = false, dereference_root = false, remove_destination = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies a file system entry <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method copies its contents recursively. This method preserves file types, c.f. symlink, directory… (FIFO, device files and etc. are not supported yet)</p>

<p>Both of <code>src</code> and <code>dest</code> must be a path name. <code>src</code> must exist, <code>dest</code> must not exist.</p>

<p>If <code>preserve</code> is true, this method preserves owner, group, and modified time.  Permissions are copied regardless <code>preserve</code>.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>
          
          

          
          <div class="method-source-code" id="copy_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dereference_root</span>
    <span class="ruby-identifier">src</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">src</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">false</span>).<span class="ruby-identifier">wrap_traverse</span>(<span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>))
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>, <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-copy_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_file</span><span
            class="method-args">(src, dest, preserve = false, dereference = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies file contents of <code>src</code> to <code>dest</code>. Both of <code>src</code> and <code>dest</code> must be a path name.</p>
          
          

          
          <div class="method-source-code" id="copy_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 509</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference</span>)
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-copy_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_stream</span><span
            class="method-args">(src, dest)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies stream <code>src</code> to <code>dest</code>. <code>src</code> must respond to read(n) and <code>dest</code> must respond to write(str).</p>
          
          

          
          <div class="method-source-code" id="copy_stream-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 521</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-cp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies a file content <code>src</code> to <code>dest</code>.  If <code>dest</code> is a directory, copies <code>src</code> to <code>dest/src</code>.</p>

<p>If <code>src</code> is a list of files, then <code>dest</code> must be a directory.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-string">&#39;eval.c&#39;</span>, <span class="ruby-string">&#39;eval.c.org&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-node">%w(cgi.rb complex.rb date.rb)</span>, <span class="ruby-string">&#39;/usr/lib/ruby/1.6&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-node">%w(cgi.rb complex.rb date.rb)</span>, <span class="ruby-string">&#39;/usr/lib/ruby/1.6&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-string">&#39;symlink&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>   <span class="ruby-comment"># copy content, &quot;dest&quot; is not a symlink</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{preserve ? &#39; -p&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-copy">copy</a>
        </div>
        

        
      </div>

    
      <div id="method-c-cp_lr" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp_lr</span><span
            class="method-args">(src, dest, noop: nil, verbose: nil, dereference_root: true, remove_destination: false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Hard link <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method links all its contents recursively. If <code>dest</code> is a directory, links <code>src</code> to <code>dest/src</code>.</p>

<p><code>src</code> can be a list of files.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-string">&#39;lib/&#39;</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>

<span class="ruby-comment"># Examples of linking several files to target directory.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-node">%w(mail.rb field.rb debug/)</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/tmail&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.rb&#39;</span>), <span class="ruby-string">&#39;/home/aamine/lib/ruby&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>

<span class="ruby-comment"># If you want to link all contents of a directory instead of the</span>
<span class="ruby-comment"># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,</span>
<span class="ruby-comment"># use the following code.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-string">&#39;src/.&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>  <span class="ruby-comment"># cp_lr(&#39;src&#39;, &#39;dest&#39;) makes dest/src, but this doesn&#39;t.</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp_lr-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_lr</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
          <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -lr#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">link_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-cp_r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp_r</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil, dereference_root: true, remove_destination: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method copies all its contents recursively. If <code>dest</code> is a directory, copies <code>src</code> to <code>dest/src</code>.</p>

<p><code>src</code> can be a list of files.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>

<pre class="ruby"><span class="ruby-comment"># Installing Ruby library &quot;mylib&quot; under the site_ruby</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-string">&#39;lib/&#39;</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>

<span class="ruby-comment"># Examples of copying several files to target directory.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-node">%w(mail.rb field.rb debug/)</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/tmail&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.rb&#39;</span>), <span class="ruby-string">&#39;/home/foo/lib/ruby&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>

<span class="ruby-comment"># If you want to copy all contents of a directory instead of the</span>
<span class="ruby-comment"># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,</span>
<span class="ruby-comment"># use following code.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-string">&#39;src/.&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>     <span class="ruby-comment"># cp_r(&#39;src&#39;, &#39;dest&#39;) makes dest/src,</span>
                                   <span class="ruby-comment"># but this doesn&#39;t.</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp_r-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 463</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
         <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{preserve ? &#39;p&#39; : &#39;&#39;}#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-getwd" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">getwd</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-pwd">pwd</a>
        </div>
        
      </div>

    
      <div id="method-c-have_option-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_option?</span><span
            class="method-args">(mid, opt)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the method <code>mid</code> have an option <code>opt</code>.</p>

<pre class="ruby"><span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">have_option?</span>(<span class="ruby-value">:cp</span>, <span class="ruby-value">:noop</span>)     <span class="ruby-comment">#=&gt; true</span>
<span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">have_option?</span>(<span class="ruby-value">:rm</span>, <span class="ruby-value">:force</span>)    <span class="ruby-comment">#=&gt; true</span>
<span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">have_option?</span>(<span class="ruby-value">:rm</span>, <span class="ruby-value">:preserve</span>) <span class="ruby-comment">#=&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="have_option-3F-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1660</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">have_option?</span>(<span class="ruby-identifier">mid</span>, <span class="ruby-identifier">opt</span>)
  <span class="ruby-identifier">li</span> = <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;no such method: #{mid}&quot;</span>
  <span class="ruby-identifier">li</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-identical-3F" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">identical?</span><span
            class="method-args">(a, b)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
        </div>
        
      </div>

    
      <div id="method-c-install" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install</span><span
            class="method-args">(src, dest, mode: nil, owner: nil, group: nil, preserve: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If <code>src</code> is not same as <code>dest</code>, copies it and changes the permission mode to <code>mode</code>.  If <code>dest</code> is a directory, destination is <code>dest</code>/<code>src</code>. This method removes destination before copy.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">install</span> <span class="ruby-string">&#39;ruby&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">0755</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">install</span> <span class="ruby-string">&#39;lib.rb&#39;</span>, <span class="ruby-string">&#39;/usr/local/lib/ruby/site_ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="install-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 862</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">owner:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">group:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>,
            <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">+&quot;install -c&quot;</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -p&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -m &#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -o #{owner}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">owner</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -g #{group}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">src</span>,<span class="ruby-identifier">dest</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">msg</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">owner</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
      <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">st</span>), <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">gid</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-link" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">link</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-ln">ln</a>
        </div>
        
      </div>

    
      <div id="method-c-link_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">link_entry</span><span
            class="method-args">(src, dest, dereference_root = false, remove_destination = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Hard links a file system entry <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method links its contents recursively.</p>

<p>Both of <code>src</code> and <code>dest</code> must be a path name. <code>src</code> must exist, <code>dest</code> must not exist.</p>

<p>If <code>dereference_root</code> is true, this method dereferences the tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>
          
          

          
          <div class="method-source-code" id="link_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 406</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-ln" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(target, link, force: nil, noop: nil, verbose: nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(target,  dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(targets, dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>In the first form, creates a hard link <code>link</code> which points to <code>target</code>. If <code>link</code> already exists, raises Errno::EEXIST. But if the <code>force</code> option is set, overwrites <code>link</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-string">&#39;gcc&#39;</span>, <span class="ruby-string">&#39;cc&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-string">&#39;/usr/bin/emacs21&#39;</span>, <span class="ruby-string">&#39;/usr/bin/emacs&#39;</span>
</pre>

<p>In the second form, creates a link <code>dir/target</code> pointing to <code>target</code>. In the third form, creates several hard links in the directory <code>dir</code>, pointing to each item in <code>targets</code>. If <code>dir</code> is not a directory, raises Errno::ENOTDIR.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span> <span class="ruby-string">&#39;/sbin&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-node">%w(cp mv mkdir)</span>, <span class="ruby-string">&#39;/bin&#39;</span>   <span class="ruby-comment"># Now /sbin/cp and /bin/cp are linked.</span>
</pre>
          
          

          
          <div class="method-source-code" id="ln-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-link">link</a>
        </div>
        

        
      </div>

    
      <div id="method-c-ln_s" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(target, link, force: nil, noop: nil, verbose: nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(target,  dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(targets, dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>In the first form, creates a symbolic link <code>link</code> which points to <code>target</code>. If <code>link</code> already exists, raises Errno::EEXIST. But if the <code>force</code> option is set, overwrites <code>link</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-string">&#39;verylongsourcefilename.c&#39;</span>, <span class="ruby-string">&#39;c&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
</pre>

<p>In the second form, creates a link <code>dir/target</code> pointing to <code>target</code>. In the third form, creates several symbolic links in the directory <code>dir</code>, pointing to each item in <code>targets</code>. If <code>dir</code> is not a directory, raises Errno::ENOTDIR.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/bin/*.rb&#39;</span>), <span class="ruby-string">&#39;/home/foo/bin&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="ln_s-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 369</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{force ? &#39;f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-symlink">symlink</a>
        </div>
        

        
      </div>

    
      <div id="method-c-ln_sf" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_sf(*args)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>
          
          

          
          <div class="method-source-code" id="ln_sf-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-makedirs" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">makedirs</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
        </div>
        
      </div>

    
      <div id="method-c-mkdir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mkdir</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates one or more directories.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;test&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-node">%w(tmp data)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;notexist&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>  <span class="ruby-comment"># Does not really create.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;tmp&#39;</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">0700</span>
</pre>
          
          

          
          <div class="method-source-code" id="mkdir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-mkdir_p" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mkdir_p</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a directory and all its parent directories. For example,</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-string">&#39;/usr/local/lib/ruby&#39;</span>
</pre>

<p>causes to make following directories, if they do not exist.</p>
<ul><li>
<p>/usr</p>
</li><li>
<p>/usr/local</p>
</li><li>
<p>/usr/local/lib</p>
</li><li>
<p>/usr/local/lib/ruby</p>
</li></ul>

<p>You can pass several directories at a time in a list.</p>
          
          

          
          <div class="method-source-code" id="mkdir_p-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">path</span>)}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># optimize for the most common case</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">mode</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">stack</span> = []
    <span class="ruby-keyword">until</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">last</span>   <span class="ruby-comment"># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;</span>
      <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">pop</span>                 <span class="ruby-comment"># root directory should exist</span>
    <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-mkpath">mkpath</a>, <a href="FileUtils.html#method-i-makedirs">makedirs</a>
        </div>
        

        
      </div>

    
      <div id="method-c-mkpath" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">mkpath</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
        </div>
        
      </div>

    
      <div id="method-c-move" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">move</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mv">mv</a>
        </div>
        
      </div>

    
      <div id="method-c-mv" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mv</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Moves file(s) <code>src</code> to <code>dest</code>.  If <code>file</code> and <code>dest</code> exist on the different disk partition, the file is copied then the original file is removed.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-string">&#39;badname.rb&#39;</span>, <span class="ruby-string">&#39;goodname.rb&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-string">&#39;stuff.rb&#39;</span>, <span class="ruby-string">&#39;/notexist/lib/ruby&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>  <span class="ruby-comment"># no error</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-node">%w(junk.txt dust.txt)</span>, <span class="ruby-string">&#39;/home/foo/.trash/&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;test*.rb&#39;</span>), <span class="ruby-string">&#39;test&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="mv-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 536</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">d</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>,
             <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPERM</span> <span class="ruby-comment"># move from unencrypted to encrypted dir (ext4)</span>
        <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
          <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-move">move</a>
        </div>
        

        
      </div>

    
      <div id="method-c-options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="Array.html"><code>Array</code></a> of option names.</p>

<pre class="ruby"><span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">options</span>  <span class="ruby-comment">#=&gt; [&quot;noop&quot;, &quot;force&quot;, &quot;verbose&quot;, &quot;preserve&quot;, &quot;mode&quot;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="options-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1649</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">options</span>
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-options_of" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">options_of</span><span
            class="method-args">(mid)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="Array.html"><code>Array</code></a> of option names of the method <code>mid</code>.</p>

<pre class="ruby"><span class="ruby-identifier">p</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">options_of</span>(<span class="ruby-value">:rm</span>)  <span class="ruby-comment">#=&gt; [&quot;noop&quot;, &quot;verbose&quot;, &quot;force&quot;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="options_of-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1670</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">options_of</span>(<span class="ruby-identifier">mid</span>)
  <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-pwd" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pwd</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the name of the current directory.</p>
          
          

          
          <div class="method-source-code" id="pwd-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pwd</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-getwd">getwd</a>
        </div>
        

        
      </div>

    
      <div id="method-c-remove" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">remove</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm">rm</a>
        </div>
        
      </div>

    
      <div id="method-c-remove_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_dir</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes a directory <code>dir</code> and its contents recursively. This method ignores <a href="StandardError.html"><code>StandardError</code></a> if <code>force</code> is true.</p>
          
          

          
          <div class="method-source-code" id="remove_dir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment"># FIXME?? check if it is a directory</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-remove_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_entry</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method removes a file system entry <code>path</code>. <code>path</code> might be a regular file, a directory, or something. If <code>path</code> is a directory, remove it recursively.</p>

<p>See also remove_entry_secure.</p>
          
          

          
          <div class="method-source-code" id="remove_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 777</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-remove_entry_secure" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_entry_secure</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method removes a file system entry <code>path</code>.  <code>path</code> shall be a regular file, a directory, or something.  If <code>path</code> is a directory, remove it recursively.  This method is required to avoid TOCTTOU (time-of-check-to-time-of-use) local security vulnerability of rm_r. <a href="FileUtils.html#method-i-rm_r"><code>rm_r</code></a> causes security hole when:</p>
<ul><li>
<p>Parent directory is world writable (including /tmp).</p>
</li><li>
<p>Removing directory tree includes world writable directory.</p>
</li><li>
<p>The system has symbolic link.</p>
</li></ul>

<p>To avoid this security hole, this method applies special preprocess. If <code>path</code> is a directory, this method chown(2) and chmod(2) all removing directories.  This requires the current process is the owner of the removing whole directory tree, or is the super user (root).</p>

<p>WARNING: You must ensure that <strong>ALL</strong> parent directories cannot be moved by other untrusted users.  For example, parent directories should not be owned by untrusted users, and should not be world writable except when the sticky bit set.</p>

<p>WARNING: Only the owner of the removing directory tree, or Unix super user (root) should invoke this method.  Otherwise this method does not work.</p>

<p>For details of this security vulnerability, see Perl&#39;s case:</p>
<ul><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448">cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448</a></p>
</li><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452">cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452</a></p>
</li></ul>

<p>For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].</p>
          
          

          
          <div class="method-source-code" id="remove_entry_secure-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 684</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># is a directory.</span>
  <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">world_writable?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{&#39;%o&#39; % parent_st.mode})&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># freeze tree root</span>
  <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
  <span class="ruby-identifier">dot_file</span> = <span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/.&quot;</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dot_file</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    }
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EISDIR</span> <span class="ruby-comment"># JRuby in non-native mode can&#39;t open files as dirs</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">dot_file</span>).<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fstat</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">fstat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">dot_file</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>, <span class="ruby-identifier">dot_file</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>))
    <span class="ruby-comment"># TOC-to-TOU attack?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># ---- tree root is frozen ----</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-remove_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_file</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes a file <code>path</code>. This method ignores <a href="StandardError.html"><code>StandardError</code></a> if <code>force</code> is true.</p>
          
          

          
          <div class="method-source-code" id="remove_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 794</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-rm" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Remove file(s) specified in <code>list</code>.  This method cannot remove directories. All StandardErrors are ignored when the :force option is set.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-node">%w( junk.txt dust.txt )</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.so&#39;</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-string">&#39;NotExistFile&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>   <span class="ruby-comment"># never raises exception</span>
</pre>
          
          

          
          <div class="method-source-code" id="rm-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 576</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{force ? &#39; -f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-remove">remove</a>
        </div>
        

        
      </div>

    
      <div id="method-c-rm_f" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_f</span><span
            class="method-args">(list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>
          
          

          
          <div class="method-source-code" id="rm_f-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 595</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-safe_unlink">safe_unlink</a>
        </div>
        

        
      </div>

    
      <div id="method-c-rm_r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_r</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>remove files <code>list[0]</code> <code>list[1]</code>… If <code>list[n]</code> is a directory, removes its all contents recursively. This method ignores <a href="StandardError.html"><code>StandardError</code></a> when :force option is set.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/tmp/*&#39;</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-string">&#39;some_dir&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
</pre>

<p>WARNING: This method causes local vulnerability if one of parent directories or removing directory tree are world writable (including /tmp, whose permission is 1777), and the current process has strong privilege such as Unix super user (root), and the system has symbolic link.  For secure removing, read the documentation of <a href="FileUtils.html#method-i-remove_entry_secure"><code>remove_entry_secure</code></a> carefully, and set :secure option to true. Default is <code>secure: false</code>.</p>

<p>NOTE: This method calls <a href="FileUtils.html#method-i-remove_entry_secure"><code>remove_entry_secure</code></a> if :secure option is set. See also remove_entry_secure.</p>
          
          

          
          <div class="method-source-code" id="rm_r-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{force ? &#39;f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
      <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-rm_rf" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_rf</span><span
            class="method-args">(list, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>

<p>WARNING: This method causes local vulnerability. Read the documentation of <a href="FileUtils.html#method-i-rm_r"><code>rm_r</code></a> first.</p>
          
          

          
          <div class="method-source-code" id="rm_rf-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 644</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>, <span class="ruby-value">secure:</span> <span class="ruby-identifier">secure</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-rmtree">rmtree</a>
        </div>
        

        
      </div>

    
      <div id="method-c-rmdir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rmdir</span><span
            class="method-args">(list, parents: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes one or more directories.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-string">&#39;somedir&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-node">%w(somedir anydir otherdir)</span>
<span class="ruby-comment"># Does not really remove directory; outputs message.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-string">&#39;somedir&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="rmdir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">parents:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{parents ? &#39;-p &#39; : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">dir</span>))
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">parents</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">until</span> (<span class="ruby-identifier">parent</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)) <span class="ruby-operator">==</span> <span class="ruby-string">&#39;.&#39;</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>
          <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">parent</span>
          <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-rmtree" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">rmtree</span><span
            class="method-args">(list, noop: nil, verbose: nil, secure: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm_rf">rm_rf</a>
        </div>
        
      </div>

    
      <div id="method-c-safe_unlink" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">safe_unlink</span><span
            class="method-args">(list, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm_f">rm_f</a>
        </div>
        
      </div>

    
      <div id="method-c-symlink" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">symlink</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-ln_s">ln_s</a>
        </div>
        
      </div>

    
      <div id="method-c-touch" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">touch</span><span
            class="method-args">(list, noop: nil, verbose: nil, mtime: nil, nocreate: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates modification time (mtime) and access time (atime) of file(s) in <code>list</code>.  Files are created if they don&#39;t exist.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-string">&#39;timestamp&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.c&#39;</span>);  <span class="ruby-identifier">system</span> <span class="ruby-string">&#39;make&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="touch-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">mtime:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">nocreate:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">mtime</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? &#39;-c &#39; : &#39;&#39;}#{t ? t.strftime(&#39;-t %Y%m%d%H%M.%S &#39;) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">created</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;a&#39;</span>) {
        ;
      }
      <span class="ruby-identifier">created</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">retry</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">t</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-uptodate-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">uptodate?</span><span
            class="method-args">(new, old_list)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if <code>new</code> is newer than all <code>old_list</code>. Non-existent files are older than any file.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">uptodate?</span>(<span class="ruby-string">&#39;hello.o&#39;</span>, <span class="ruby-node">%w(hello.c hello.h)</span>) <span class="ruby-keyword">or</span> \
    <span class="ruby-identifier">system</span> <span class="ruby-string">&#39;make hello.o&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="uptodate-3F-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-cd" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cd</span><span
            class="method-args">(dir, verbose: nil) { |dir| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes the current directory to the directory <code>dir</code>.</p>

<p>If this method is called with block, resumes to the previous working directory after the block execution has finished.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>)  <span class="ruby-comment"># change directory</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>)   <span class="ruby-comment"># change directory and report it</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span>(<span class="ruby-string">&#39;/&#39;</span>) <span class="ruby-keyword">do</span>  <span class="ruby-comment"># change directory</span>
  <span class="ruby-comment"># ...               # do something</span>
<span class="ruby-keyword">end</span>                   <span class="ruby-comment"># return to original directory</span>
</pre>
          
          

          
          <div class="method-source-code" id="cd-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: dir</span>
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-string">&#39;cd -&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-chdir">chdir</a>
        </div>
        

        
      </div>

    
      <div id="method-i-chdir" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">chdir</span><span
            class="method-args">(dir, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-cd">cd</a>
        </div>
        
      </div>

    
      <div id="method-i-chmod" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chmod</span><span
            class="method-args">(mode, list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes permission bits on the named files (in <code>list</code>) to the bit pattern represented by <code>mode</code>.</p>

<p><code>mode</code> is the symbolic and absolute mode can be used.</p>

<p>Absolute mode is</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0755</span>, <span class="ruby-string">&#39;somecommand&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0644</span>, <span class="ruby-node">%w(my.rb your.rb his.rb her.rb)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0755</span>, <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>

<p>Symbolic mode is</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wrx,go=rx&quot;</span>, <span class="ruby-string">&#39;somecommand&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wr,go=rr&quot;</span>, <span class="ruby-node">%w(my.rb your.rb his.rb her.rb)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-string">&quot;u=wrx,go=rx&quot;</span>, <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
<dl class="rdoc-list note-list"><dt>“a” 
<dd>
<p>is user, group, other mask.</p>
</dd><dt>“u” 
<dd>
<p>is user&#39;s mask.</p>
</dd><dt>“g” 
<dd>
<p>is group&#39;s mask.</p>
</dd><dt>“o” 
<dd>
<p>is other&#39;s mask.</p>
</dd><dt>“w” 
<dd>
<p>is write permission.</p>
</dd><dt>“r” 
<dd>
<p>is read permission.</p>
</dd><dt>“x” 
<dd>
<p>is execute permission.</p>
</dd><dt>“X” 
<dd>
<p>is execute permission for directories only, must be used in conjunction with “+”</p>
</dd><dt>“s” 
<dd>
<p>is uid, gid.</p>
</dd><dt>“t” 
<dd>
<p>is sticky bit.</p>
</dd><dt>“+” 
<dd>
<p>is added to a class given the specified mode.</p>
</dd><dt>“-” 
<dd>
<p>Is removed from a given class given mode.</p>
</dd><dt>“=” 
<dd>
<p>Is the exact nature of the class will be given a specified mode.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="chmod-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1012</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod %s %s&#39;</span>, <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">path</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-chmod_R" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chmod_R</span><span
            class="method-args">(mode, list, noop: nil, verbose: nil, force: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes permission bits on the named files (in <code>list</code>) to the bit pattern represented by <code>mode</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod_R</span> <span class="ruby-value">0700</span>, <span class="ruby-node">&quot;/tmp/app.#{$$}&quot;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod_R</span> <span class="ruby-string">&quot;u=wrx&quot;</span>, <span class="ruby-node">&quot;/tmp/app.#{$$}&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="chmod_R-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1029</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">path</span>))
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-chown" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chown</span><span
            class="method-args">(user, group, list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes owner and group on the named files (in <code>list</code>) to the user <code>user</code> and the group <code>group</code>.  <code>user</code> and <code>group</code> may be an ID (Integer/String) or a name (<a href="String.html"><code>String</code></a>). If <code>user</code> or <code>group</code> is nil, this method does not change the attribute.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown</span> <span class="ruby-string">&#39;root&#39;</span>, <span class="ruby-string">&#39;staff&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown</span> <span class="ruby-keyword">nil</span>, <span class="ruby-string">&#39;bin&#39;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/usr/bin/*&#39;</span>), <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="chown-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1057</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown %s %s&#39;</span>,
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-chown_R" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chown_R</span><span
            class="method-args">(user, group, list, noop: nil, verbose: nil, force: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Changes owner and group on the named files (in <code>list</code>) to the user <code>user</code> and the group <code>group</code> recursively. <code>user</code> and <code>group</code> may be an ID (Integer/String) or a name (<a href="String.html"><code>String</code></a>).  If <code>user</code> or <code>group</code> is nil, this method does not change the attribute.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown_R</span> <span class="ruby-string">&#39;www&#39;</span>, <span class="ruby-string">&#39;www&#39;</span>, <span class="ruby-string">&#39;/var/www/htdocs&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chown_R</span> <span class="ruby-string">&#39;cvs&#39;</span>, <span class="ruby-string">&#39;cvs&#39;</span>, <span class="ruby-string">&#39;/var/cvs&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="chown_R-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1081</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cmp" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">cmp</span><span
            class="method-args">(a, b)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
        </div>
        
      </div>

    
      <div id="method-i-compare_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_file</span><span
            class="method-args">(a, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the contents of a file <code>a</code> and a file <code>b</code> are identical.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_file</span>(<span class="ruby-string">&#39;somefile&#39;</span>, <span class="ruby-string">&#39;somefile&#39;</span>)       <span class="ruby-comment">#=&gt; true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">compare_file</span>(<span class="ruby-string">&#39;/dev/null&#39;</span>, <span class="ruby-string">&#39;/dev/urandom&#39;</span>)  <span class="ruby-comment">#=&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="compare_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 816</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
    }
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-identical-3F">identical?</a>, <a href="FileUtils.html#method-i-cmp">cmp</a>
        </div>
        

        
      </div>

    
      <div id="method-i-compare_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_stream</span><span
            class="method-args">(a, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the contents of a stream <code>a</code> and <code>b</code> are identical.</p>
          
          

          
          <div class="method-source-code" id="compare_stream-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 834</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;2.4&quot;</span>
    <span class="ruby-identifier">sa</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)
    <span class="ruby-identifier">sb</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">sa</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">sb</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sa</span>)
    <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sb</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-copy" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">copy</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-cp">cp</a>
        </div>
        
      </div>

    
      <div id="method-i-copy_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_entry</span><span
            class="method-args">(src, dest, preserve = false, dereference_root = false, remove_destination = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies a file system entry <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method copies its contents recursively. This method preserves file types, c.f. symlink, directory… (FIFO, device files and etc. are not supported yet)</p>

<p>Both of <code>src</code> and <code>dest</code> must be a path name. <code>src</code> must exist, <code>dest</code> must not exist.</p>

<p>If <code>preserve</code> is true, this method preserves owner, group, and modified time.  Permissions are copied regardless <code>preserve</code>.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>
          
          

          
          <div class="method-source-code" id="copy_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dereference_root</span>
    <span class="ruby-identifier">src</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">src</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">false</span>).<span class="ruby-identifier">wrap_traverse</span>(<span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>))
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>, <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-copy_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_file</span><span
            class="method-args">(src, dest, preserve = false, dereference = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies file contents of <code>src</code> to <code>dest</code>. Both of <code>src</code> and <code>dest</code> must be a path name.</p>
          
          

          
          <div class="method-source-code" id="copy_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 509</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference</span>)
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-copy_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_stream</span><span
            class="method-args">(src, dest)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies stream <code>src</code> to <code>dest</code>. <code>src</code> must respond to read(n) and <code>dest</code> must respond to write(str).</p>
          
          

          
          <div class="method-source-code" id="copy_stream-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 521</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies a file content <code>src</code> to <code>dest</code>.  If <code>dest</code> is a directory, copies <code>src</code> to <code>dest/src</code>.</p>

<p>If <code>src</code> is a list of files, then <code>dest</code> must be a directory.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-string">&#39;eval.c&#39;</span>, <span class="ruby-string">&#39;eval.c.org&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-node">%w(cgi.rb complex.rb date.rb)</span>, <span class="ruby-string">&#39;/usr/lib/ruby/1.6&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-node">%w(cgi.rb complex.rb date.rb)</span>, <span class="ruby-string">&#39;/usr/lib/ruby/1.6&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-string">&#39;symlink&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>   <span class="ruby-comment"># copy content, &quot;dest&quot; is not a symlink</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{preserve ? &#39; -p&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-copy">copy</a>
        </div>
        

        
      </div>

    
      <div id="method-i-cp_lr" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp_lr</span><span
            class="method-args">(src, dest, noop: nil, verbose: nil, dereference_root: true, remove_destination: false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Hard link <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method links all its contents recursively. If <code>dest</code> is a directory, links <code>src</code> to <code>dest/src</code>.</p>

<p><code>src</code> can be a list of files.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-string">&#39;lib/&#39;</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>

<span class="ruby-comment"># Examples of linking several files to target directory.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-node">%w(mail.rb field.rb debug/)</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/tmail&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.rb&#39;</span>), <span class="ruby-string">&#39;/home/aamine/lib/ruby&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>

<span class="ruby-comment"># If you want to link all contents of a directory instead of the</span>
<span class="ruby-comment"># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,</span>
<span class="ruby-comment"># use the following code.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_lr</span> <span class="ruby-string">&#39;src/.&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>  <span class="ruby-comment"># cp_lr(&#39;src&#39;, &#39;dest&#39;) makes dest/src, but this doesn&#39;t.</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp_lr-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_lr</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
          <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -lr#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">link_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cp_r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cp_r</span><span
            class="method-args">(src, dest, preserve: nil, noop: nil, verbose: nil, dereference_root: true, remove_destination: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Copies <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method copies all its contents recursively. If <code>dest</code> is a directory, copies <code>src</code> to <code>dest/src</code>.</p>

<p><code>src</code> can be a list of files.</p>

<p>If <code>dereference_root</code> is true, this method dereference tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>

<pre class="ruby"><span class="ruby-comment"># Installing Ruby library &quot;mylib&quot; under the site_ruby</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-string">&#39;lib/&#39;</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/mylib&#39;</span>

<span class="ruby-comment"># Examples of copying several files to target directory.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-node">%w(mail.rb field.rb debug/)</span>, <span class="ruby-identifier">site_ruby</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/tmail&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.rb&#39;</span>), <span class="ruby-string">&#39;/home/foo/lib/ruby&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>

<span class="ruby-comment"># If you want to copy all contents of a directory instead of the</span>
<span class="ruby-comment"># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,</span>
<span class="ruby-comment"># use following code.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span> <span class="ruby-string">&#39;src/.&#39;</span>, <span class="ruby-string">&#39;dest&#39;</span>     <span class="ruby-comment"># cp_r(&#39;src&#39;, &#39;dest&#39;) makes dest/src,</span>
                                   <span class="ruby-comment"># but this doesn&#39;t.</span>
</pre>
          
          

          
          <div class="method-source-code" id="cp_r-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 463</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
         <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{preserve ? &#39;p&#39; : &#39;&#39;}#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-getwd" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">getwd</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-pwd">pwd</a>
        </div>
        
      </div>

    
      <div id="method-i-identical-3F" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">identical?</span><span
            class="method-args">(a, b)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
        </div>
        
      </div>

    
      <div id="method-i-install" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install</span><span
            class="method-args">(src, dest, mode: nil, owner: nil, group: nil, preserve: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If <code>src</code> is not same as <code>dest</code>, copies it and changes the permission mode to <code>mode</code>.  If <code>dest</code> is a directory, destination is <code>dest</code>/<code>src</code>. This method removes destination before copy.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">install</span> <span class="ruby-string">&#39;ruby&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">0755</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">install</span> <span class="ruby-string">&#39;lib.rb&#39;</span>, <span class="ruby-string">&#39;/usr/local/lib/ruby/site_ruby&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="install-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 862</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">owner:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">group:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>,
            <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">+&quot;install -c&quot;</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -p&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -m &#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -o #{owner}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">owner</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -g #{group}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">src</span>,<span class="ruby-identifier">dest</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">msg</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">owner</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
      <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">st</span>), <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">gid</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-link" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">link</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-ln">ln</a>
        </div>
        
      </div>

    
      <div id="method-i-link_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">link_entry</span><span
            class="method-args">(src, dest, dereference_root = false, remove_destination = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Hard links a file system entry <code>src</code> to <code>dest</code>. If <code>src</code> is a directory, this method links its contents recursively.</p>

<p>Both of <code>src</code> and <code>dest</code> must be a path name. <code>src</code> must exist, <code>dest</code> must not exist.</p>

<p>If <code>dereference_root</code> is true, this method dereferences the tree root.</p>

<p>If <code>remove_destination</code> is true, this method removes each destination file before copy.</p>
          
          

          
          <div class="method-source-code" id="link_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 406</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ln" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(target, link, force: nil, noop: nil, verbose: nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(target,  dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln(targets, dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>In the first form, creates a hard link <code>link</code> which points to <code>target</code>. If <code>link</code> already exists, raises Errno::EEXIST. But if the <code>force</code> option is set, overwrites <code>link</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-string">&#39;gcc&#39;</span>, <span class="ruby-string">&#39;cc&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-string">&#39;/usr/bin/emacs21&#39;</span>, <span class="ruby-string">&#39;/usr/bin/emacs&#39;</span>
</pre>

<p>In the second form, creates a link <code>dir/target</code> pointing to <code>target</code>. In the third form, creates several hard links in the directory <code>dir</code>, pointing to each item in <code>targets</code>. If <code>dir</code> is not a directory, raises Errno::ENOTDIR.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cd</span> <span class="ruby-string">&#39;/sbin&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln</span> <span class="ruby-node">%w(cp mv mkdir)</span>, <span class="ruby-string">&#39;/bin&#39;</span>   <span class="ruby-comment"># Now /sbin/cp and /bin/cp are linked.</span>
</pre>
          
          

          
          <div class="method-source-code" id="ln-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-link">link</a>
        </div>
        

        
      </div>

    
      <div id="method-i-ln_s" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(target, link, force: nil, noop: nil, verbose: nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(target,  dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_s(targets, dir, force: nil, noop: nil, verbose: nil)
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>In the first form, creates a symbolic link <code>link</code> which points to <code>target</code>. If <code>link</code> already exists, raises Errno::EEXIST. But if the <code>force</code> option is set, overwrites <code>link</code>.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-string">&#39;/usr/bin/ruby&#39;</span>, <span class="ruby-string">&#39;/usr/local/bin/ruby&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-string">&#39;verylongsourcefilename.c&#39;</span>, <span class="ruby-string">&#39;c&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
</pre>

<p>In the second form, creates a link <code>dir/target</code> pointing to <code>target</code>. In the third form, creates several symbolic links in the directory <code>dir</code>, pointing to each item in <code>targets</code>. If <code>dir</code> is not a directory, raises Errno::ENOTDIR.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/bin/*.rb&#39;</span>), <span class="ruby-string">&#39;/home/foo/bin&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="ln_s-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 369</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{force ? &#39;f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-symlink">symlink</a>
        </div>
        

        
      </div>

    
      <div id="method-i-ln_sf" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ln_sf(*args)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">ln_s</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>
          
          

          
          <div class="method-source-code" id="ln_sf-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-makedirs" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">makedirs</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
        </div>
        
      </div>

    
      <div id="method-i-mkdir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mkdir</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates one or more directories.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;test&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-node">%w(tmp data)</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;notexist&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>  <span class="ruby-comment"># Does not really create.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-string">&#39;tmp&#39;</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">0700</span>
</pre>
          
          

          
          <div class="method-source-code" id="mkdir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mkdir_p" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mkdir_p</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a directory and all its parent directories. For example,</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-string">&#39;/usr/local/lib/ruby&#39;</span>
</pre>

<p>causes to make following directories, if they do not exist.</p>
<ul><li>
<p>/usr</p>
</li><li>
<p>/usr/local</p>
</li><li>
<p>/usr/local/lib</p>
</li><li>
<p>/usr/local/lib/ruby</p>
</li></ul>

<p>You can pass several directories at a time in a list.</p>
          
          

          
          <div class="method-source-code" id="mkdir_p-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">path</span>)}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># optimize for the most common case</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">mode</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">stack</span> = []
    <span class="ruby-keyword">until</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">last</span>   <span class="ruby-comment"># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;</span>
      <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">pop</span>                 <span class="ruby-comment"># root directory should exist</span>
    <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-mkpath">mkpath</a>, <a href="FileUtils.html#method-i-makedirs">makedirs</a>
        </div>
        

        
      </div>

    
      <div id="method-i-mkpath" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">mkpath</span><span
            class="method-args">(list, mode: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
        </div>
        
      </div>

    
      <div id="method-i-move" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">move</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-mv">mv</a>
        </div>
        
      </div>

    
      <div id="method-i-mv" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mv</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Moves file(s) <code>src</code> to <code>dest</code>.  If <code>file</code> and <code>dest</code> exist on the different disk partition, the file is copied then the original file is removed.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-string">&#39;badname.rb&#39;</span>, <span class="ruby-string">&#39;goodname.rb&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-string">&#39;stuff.rb&#39;</span>, <span class="ruby-string">&#39;/notexist/lib/ruby&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>  <span class="ruby-comment"># no error</span>

<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-node">%w(junk.txt dust.txt)</span>, <span class="ruby-string">&#39;/home/foo/.trash/&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;test*.rb&#39;</span>), <span class="ruby-string">&#39;test&#39;</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="mv-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 536</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">d</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>,
             <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPERM</span> <span class="ruby-comment"># move from unencrypted to encrypted dir (ext4)</span>
        <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
          <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-move">move</a>
        </div>
        

        
      </div>

    
      <div id="method-i-pwd" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pwd</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the name of the current directory.</p>
          
          

          
          <div class="method-source-code" id="pwd-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pwd</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-getwd">getwd</a>
        </div>
        

        
      </div>

    
      <div id="method-i-remove" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">remove</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm">rm</a>
        </div>
        
      </div>

    
      <div id="method-i-remove_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_dir</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes a directory <code>dir</code> and its contents recursively. This method ignores <a href="StandardError.html"><code>StandardError</code></a> if <code>force</code> is true.</p>
          
          

          
          <div class="method-source-code" id="remove_dir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment"># FIXME?? check if it is a directory</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_entry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_entry</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method removes a file system entry <code>path</code>. <code>path</code> might be a regular file, a directory, or something. If <code>path</code> is a directory, remove it recursively.</p>

<p>See also remove_entry_secure.</p>
          
          

          
          <div class="method-source-code" id="remove_entry-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 777</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_entry_secure" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_entry_secure</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method removes a file system entry <code>path</code>.  <code>path</code> shall be a regular file, a directory, or something.  If <code>path</code> is a directory, remove it recursively.  This method is required to avoid TOCTTOU (time-of-check-to-time-of-use) local security vulnerability of rm_r. <a href="FileUtils.html#method-i-rm_r"><code>rm_r</code></a> causes security hole when:</p>
<ul><li>
<p>Parent directory is world writable (including /tmp).</p>
</li><li>
<p>Removing directory tree includes world writable directory.</p>
</li><li>
<p>The system has symbolic link.</p>
</li></ul>

<p>To avoid this security hole, this method applies special preprocess. If <code>path</code> is a directory, this method chown(2) and chmod(2) all removing directories.  This requires the current process is the owner of the removing whole directory tree, or is the super user (root).</p>

<p>WARNING: You must ensure that <strong>ALL</strong> parent directories cannot be moved by other untrusted users.  For example, parent directories should not be owned by untrusted users, and should not be world writable except when the sticky bit set.</p>

<p>WARNING: Only the owner of the removing directory tree, or Unix super user (root) should invoke this method.  Otherwise this method does not work.</p>

<p>For details of this security vulnerability, see Perl&#39;s case:</p>
<ul><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448">cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448</a></p>
</li><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452">cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452</a></p>
</li></ul>

<p>For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].</p>
          
          

          
          <div class="method-source-code" id="remove_entry_secure-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 684</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># is a directory.</span>
  <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">world_writable?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{&#39;%o&#39; % parent_st.mode})&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># freeze tree root</span>
  <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
  <span class="ruby-identifier">dot_file</span> = <span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/.&quot;</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dot_file</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    }
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EISDIR</span> <span class="ruby-comment"># JRuby in non-native mode can&#39;t open files as dirs</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">dot_file</span>).<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fstat</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">fstat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">dot_file</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>, <span class="ruby-identifier">dot_file</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>))
    <span class="ruby-comment"># TOC-to-TOU attack?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># ---- tree root is frozen ----</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_file</span><span
            class="method-args">(path, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes a file <code>path</code>. This method ignores <a href="StandardError.html"><code>StandardError</code></a> if <code>force</code> is true.</p>
          
          

          
          <div class="method-source-code" id="remove_file-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 794</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rm" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Remove file(s) specified in <code>list</code>.  This method cannot remove directories. All StandardErrors are ignored when the :force option is set.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-node">%w( junk.txt dust.txt )</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.so&#39;</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-string">&#39;NotExistFile&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>   <span class="ruby-comment"># never raises exception</span>
</pre>
          
          

          
          <div class="method-source-code" id="rm-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 576</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{force ? &#39; -f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-remove">remove</a>
        </div>
        

        
      </div>

    
      <div id="method-i-rm_f" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_f</span><span
            class="method-args">(list, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>
          
          

          
          <div class="method-source-code" id="rm_f-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 595</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-safe_unlink">safe_unlink</a>
        </div>
        

        
      </div>

    
      <div id="method-i-rm_r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_r</span><span
            class="method-args">(list, force: nil, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>remove files <code>list[0]</code> <code>list[1]</code>… If <code>list[n]</code> is a directory, removes its all contents recursively. This method ignores <a href="StandardError.html"><code>StandardError</code></a> when :force option is set.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;/tmp/*&#39;</span>)
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-string">&#39;some_dir&#39;</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>
</pre>

<p>WARNING: This method causes local vulnerability if one of parent directories or removing directory tree are world writable (including /tmp, whose permission is 1777), and the current process has strong privilege such as Unix super user (root), and the system has symbolic link.  For secure removing, read the documentation of <a href="FileUtils.html#method-i-remove_entry_secure"><code>remove_entry_secure</code></a> carefully, and set :secure option to true. Default is <code>secure: false</code>.</p>

<p>NOTE: This method calls <a href="FileUtils.html#method-i-remove_entry_secure"><code>remove_entry_secure</code></a> if :secure option is set. See also remove_entry_secure.</p>
          
          

          
          <div class="method-source-code" id="rm_r-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{force ? &#39;f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
      <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rm_rf" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rm_rf</span><span
            class="method-args">(list, noop: nil, verbose: nil, secure: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
</pre>

<p>WARNING: This method causes local vulnerability. Read the documentation of <a href="FileUtils.html#method-i-rm_r"><code>rm_r</code></a> first.</p>
          
          

          
          <div class="method-source-code" id="rm_rf-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 644</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>, <span class="ruby-value">secure:</span> <span class="ruby-identifier">secure</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FileUtils.html#method-i-rmtree">rmtree</a>
        </div>
        

        
      </div>

    
      <div id="method-i-rmdir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rmdir</span><span
            class="method-args">(list, parents: nil, noop: nil, verbose: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes one or more directories.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-string">&#39;somedir&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-node">%w(somedir anydir otherdir)</span>
<span class="ruby-comment"># Does not really remove directory; outputs message.</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-string">&#39;somedir&#39;</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">true</span>
</pre>
          
          

          
          <div class="method-source-code" id="rmdir-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">parents:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{parents ? &#39;-p &#39; : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">dir</span>))
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">parents</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">until</span> (<span class="ruby-identifier">parent</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)) <span class="ruby-operator">==</span> <span class="ruby-string">&#39;.&#39;</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>
          <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">parent</span>
          <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rmtree" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">rmtree</span><span
            class="method-args">(list, noop: nil, verbose: nil, secure: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm_rf">rm_rf</a>
        </div>
        
      </div>

    
      <div id="method-i-safe_unlink" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">safe_unlink</span><span
            class="method-args">(list, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-rm_f">rm_f</a>
        </div>
        
      </div>

    
      <div id="method-i-symlink" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">symlink</span><span
            class="method-args">(src, dest, force: nil, noop: nil, verbose: nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FileUtils.html#method-i-ln_s">ln_s</a>
        </div>
        
      </div>

    
      <div id="method-i-touch" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">touch</span><span
            class="method-args">(list, noop: nil, verbose: nil, mtime: nil, nocreate: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates modification time (mtime) and access time (atime) of file(s) in <code>list</code>.  Files are created if they don&#39;t exist.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-string">&#39;timestamp&#39;</span>
<span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&#39;*.c&#39;</span>);  <span class="ruby-identifier">system</span> <span class="ruby-string">&#39;make&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="touch-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 1137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">mtime:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">nocreate:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">mtime</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? &#39;-c &#39; : &#39;&#39;}#{t ? t.strftime(&#39;-t %Y%m%d%H%M.%S &#39;) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">created</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;a&#39;</span>) {
        ;
      }
      <span class="ruby-identifier">created</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">retry</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">t</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-uptodate-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">uptodate?</span><span
            class="method-args">(new, old_list)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if <code>new</code> is newer than all <code>old_list</code>. Non-existent files are older than any file.</p>

<pre class="ruby"><span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">uptodate?</span>(<span class="ruby-string">&#39;hello.o&#39;</span>, <span class="ruby-node">%w(hello.c hello.h)</span>) <span class="ruby-keyword">or</span> \
    <span class="ruby-identifier">system</span> <span class="ruby-string">&#39;make hello.o&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="uptodate-3F-source">
            <pre><span class="ruby-comment"># File lib/fileutils.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

